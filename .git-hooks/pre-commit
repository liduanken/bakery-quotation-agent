#!/usr/bin/env python3
"""Pre-commit hook to run tests before committing"""
import subprocess
import sys

def run_command(cmd, description):
    """Run a command and return success status"""
    print(f"\n{'='*60}")
    print(f"Running: {description}")
    print(f"{'='*60}")
    
    result = subprocess.run(cmd, shell=True)
    return result.returncode == 0

def main():
    """Run pre-commit checks"""
    checks = [
        ("pytest tests/unit -q", "Unit tests"),
        ("pytest tests/integration -q", "Integration tests"),
    ]
    
    all_passed = True
    for cmd, description in checks:
        if not run_command(cmd, description):
            print(f"\n❌ {description} failed!")
            all_passed = False
        else:
            print(f"\n✅ {description} passed!")
    
    if not all_passed:
        print("\n" + "="*60)
        print("❌ Pre-commit checks failed. Commit aborted.")
        print("="*60)
        return 1
    
    print("\n" + "="*60)
    print("✅ All pre-commit checks passed!")
    print("="*60)
    return 0

if __name__ == "__main__":
    sys.exit(main())
